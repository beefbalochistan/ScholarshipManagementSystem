@model IEnumerable<DAL.Models.Domain.VirtualAccount.Tranche>

@{
    ViewBag.Title = ViewBag.heading;
    ViewBag.pTitle = ViewBag.heading;
    ViewBag.pageTitle = "Account";
    Layout = "~/Views/_Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-lg-12">

        <div class="row">
            @foreach (var item in Model)
            {


<div class="col-xl-4 col-sm-6">
                    @*<div class="mt-2">
                        <h5>Tranche</h5>
                    </div>*@
                    <div class="card">
                        <div class="card-body">
                            <div class="product-img position-relative">
                                @*<div class="avatar-sm product-ribbon">
                                        <span class="avatar-title rounded-circle  bg-primary">
                                            - 25 %
                                        </span>
                                    </div>*@
                                <a asp-controller="Tranches" asp-action="Edit" asp-route-id="@item.TrancheId" class="text-dark">
                                    @{
                                        if (item.IsApproved)
                                        {
                                            <img src="~/assets/images/icon_SCO.gif" width="230" alt="" class="img-fluid mx-auto d-block">
                                        }
                                        else
                                        {
                                            <img src="~/assets/images/bank.png" width="230" alt="" class="img-fluid mx-auto d-block">
                                        }
                                    }                                    
                                </a>
                            </div>
                            <div class="text-center">
                                <h5 class="mb-1 text-truncate"><a asp-controller="Tranches" asp-action="Edit" asp-route-id="@item.TrancheId" class="text-dark">@item.Name </a></h5>
                                @{
                                    if (item.IsActive)
                                    {
                                        <i class="display-4 mdi mdi-progress-wrench text-success"></i>
                                    }                                    
                                    else if (item.IsClose)
                                    {
                                        <i class="display-4 mdi mdi-progress-close text-warning"></i>
                                    }
                                    else if (item.IsApproved)
                                    {
                                        <i class="display-4 mdi mdi-progress-check text-success"></i>
                                    }
                                    else
                                    {
                                        <i class="display-4 mdi mdi-progress-clock text-danger"></i>
                                    }
                                }
                                <div class="my-0">Commit Amount: <a asp-action="GetApplicantListInTranche" asp-controller="Applicants" asp-route-id="@item.TrancheId"><b>@item.CurrentCommittedAmount</b></a></div>
                                <div class="my-0">Approved Amount: <b>@item.ApprovedAmount</b></div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
        <!-- end row -->
    </div>  
</div>
